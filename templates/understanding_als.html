{% extends "base.html" %}

{% block title %}What is ALS ? - ALS Caregiver's Compass{% endblock %}

{% block extra_css %}
<style>
    /* Neural Simulation Section Styles */
    .neural-simulation-section {
        background: radial-gradient(circle at center, #2e2a4e 0%, #1a182d 100%);
        padding: var(--space-8);
        margin-bottom: var(--space-8);
        border-radius: 16px;
        color: white;
        border: 1px solid rgba(255, 255, 255, 0.1);
        box-shadow: var(--shadow-xl);
    }

    .neural-simulation-title {
        text-align: center;
        font-size: var(--font-size-2xl);
        color: white;
        margin-bottom: var(--space-8);
        margin-top: var(--space-2);
        font-weight: 700;
        font-family: 'Manrope', sans-serif;
    }

    .simulation-container {
        position: relative;
        height: 280px;
        border-radius: 12px;
        overflow: hidden;
        margin-bottom: var(--space-4);
        background: transparent;
        display: flex;
        justify-content: center;
        align-items: center;
    }

    .simulation-grid {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: var(--space-6);
        margin-bottom: var(--space-6);
    }

    @media (max-width: 768px) {
        .simulation-grid {
            grid-template-columns: 1fr;
        }
    }

    .simulation-section {
        display: flex;
        flex-direction: column;
    }

    .simulation-title {
        text-align: center;
        margin-bottom: var(--space-4);
        font-size: var(--font-size-lg);
        font-weight: 600;
        font-family: 'Manrope', sans-serif;
    }

    .simulation-title.healthy {
        color: var(--color-secondary);
    }

    .simulation-title.als {
        color: var(--color-accent);
    }

    .simulation-explanation {
        color: rgba(255, 255, 255, 0.8);
        font-size: var(--font-size-sm);
        text-align: center;
        padding: var(--space-3);
        border-radius: 8px;
        background: rgba(255, 255, 255, 0.1);
        backdrop-filter: blur(4px);
    }

    .shared-animation-control {
        display: flex;
        justify-content: center;
        margin-top: var(--space-4);
    }

    .toggle-control {
        position: relative;
        width: 60px;
        height: 60px;
        border-radius: 50%;
        background: linear-gradient(135deg, var(--color-primary) 0%, var(--color-accent) 100%);
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        transition: all 0.3s ease;
        box-shadow: 0 0 15px rgba(161, 140, 209, 0.3);
        border: none;
    }

    .toggle-control:hover {
        transform: scale(1.05);
        box-shadow: 0 0 20px rgba(161, 140, 209, 0.5);
    }

    .toggle-control:active {
        transform: scale(0.95);
    }

    .toggle-control .icon {
        position: absolute;
        color: white;
        font-size: 28px;
        transition: opacity 0.3s ease;
    }

    .toggle-control .play-icon {
        opacity: 1;
    }

    .toggle-control .pause-icon {
        opacity: 0;
    }

    .toggle-control.playing .play-icon {
        opacity: 0;
    }

    .toggle-control.playing .pause-icon {
        opacity: 1;
    }

    /* SVG text styles */
    .neural-simulation-section text {
        font-family: 'Inter', sans-serif;
        font-size: 12px;
        fill: var(--color-secondary);
        pointer-events: none;
        font-weight: 500;
    }

    .label-als {
        fill: var(--color-accent);
    }

    .fade-in {
        opacity: 0;
        transition: opacity 0.6s ease-in;
    }

    .fade-in.visible {
        opacity: 1;
    }

    /* Glow animations */
    @keyframes membrane-glow {

        0%,
        100% {
            filter: drop-shadow(0 0 2px rgba(246, 211, 101, 0.4));
        }

        50% {
            filter: drop-shadow(0 0 6px rgba(246, 211, 101, 0.8));
        }
    }

    @keyframes membrane-glow-als {

        0%,
        100% {
            filter: drop-shadow(0 0 2px rgba(253, 160, 133, 0.4));
        }

        50% {
            filter: drop-shadow(0 0 6px rgba(253, 160, 133, 0.8));
        }
    }

    @keyframes signal-pulse {

        0%,
        100% {
            r: 5;
            filter: drop-shadow(0 0 4px rgba(255, 255, 255, 0.6));
        }

        50% {
            r: 8;
            filter: drop-shadow(0 0 10px rgba(255, 255, 255, 1));
        }
    }

    @keyframes signal-pulse-als {

        0%,
        100% {
            r: 5;
            filter: drop-shadow(0 0 4px rgba(253, 160, 133, 0.6));
        }

        50% {
            r: 8;
            filter: drop-shadow(0 0 10px rgba(253, 160, 133, 1));
        }
    }

    .glow-healthy {
        animation: membrane-glow 2s infinite ease-in-out;
    }

    .glow-als {
        animation: membrane-glow-als 2s infinite ease-in-out;
    }

    .pulse-signal {
        animation: signal-pulse 1.5s infinite ease-in-out;
    }

    .pulse-signal-als {
        animation: signal-pulse-als 1.5s infinite ease-in-out;
    }

    /* Info Card Styles */
    .info-card {
        background: var(--color-surface);
        border-radius: 16px;
        padding: var(--space-8);
        margin-bottom: var(--space-8);
        border: 1px solid var(--color-border);
        box-shadow: var(--shadow-md);
        transition: all 0.3s ease;
    }

    .info-card:hover {
        box-shadow: var(--shadow-lg);
        border-color: var(--color-primary);
        transform: translateY(-2px);
    }

    .icon-wrapper {
        display: flex;
        justify-content: center;
        margin-bottom: var(--space-6);
    }

    .section-icon {
        width: 64px;
        height: 64px;
        background: var(--color-primary-light);
        border-radius: 16px;
        display: flex;
        align-items: center;
        justify-content: center;
        color: var(--color-primary);
        font-size: 32px;
    }

    .symptom-grid {
        display: grid;
        gap: var(--space-4);
        grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
        margin-bottom: var(--space-6);
    }

    .symptom-card {
        display: flex;
        align-items: center;
        gap: var(--space-4);
        padding: var(--space-4);
        border-radius: 12px;
        border-left: 4px solid var(--color-primary);
        background: var(--color-background);
        transition: all 0.2s ease;
    }

    .symptom-card:hover {
        transform: translateY(-2px);
        box-shadow: var(--shadow-sm);
    }

    .symptom-card.secondary {
        border-left-color: var(--color-secondary);
        background: var(--color-secondary-light);
    }

    .symptom-card.accent {
        border-left-color: var(--color-accent);
        background: var(--color-accent-light);
    }

    .symptom-icon {
        font-size: 24px;
        color: var(--color-primary);
        min-width: 40px;
        text-align: center;
    }

    .symptom-card.secondary .symptom-icon {
        color: var(--color-secondary-dark);
    }

    .symptom-card.accent .symptom-icon {
        color: var(--color-accent);
    }

    .key-message {
        margin-top: var(--space-6);
        text-align: center;
        padding: var(--space-4);
        background: var(--color-primary-light);
        border-radius: 12px;
        color: var(--color-text-primary);
        font-weight: 500;
        border: 1px solid var(--color-primary);
    }

    .timeline-container {
        position: relative;
        padding: var(--space-4);
        margin-top: var(--space-8);
    }

    .timeline-line {
        position: absolute;
        left: 50%;
        top: 0;
        bottom: 0;
        width: 2px;
        background: linear-gradient(to bottom, var(--color-secondary), var(--color-accent));
        transform: translateX(-50%);
    }

    .timeline-stage {
        position: relative;
        display: flex;
        align-items: center;
        gap: var(--space-8);
        margin-bottom: var(--space-8);
    }

    .timeline-marker {
        position: absolute;
        left: 50%;
        transform: translateX(-50%);
        width: 20px;
        height: 20px;
        border-radius: 50%;
        border: 4px solid white;
        box-shadow: var(--shadow-sm);
        z-index: 2;
    }

    .stage-card {
        padding: var(--space-6);
        border-radius: 12px;
        background: var(--color-surface);
        box-shadow: var(--shadow-md);
        transition: all 0.3s ease;
        border: 1px solid var(--color-border);
    }

    .stage-card:hover {
        transform: translateY(-2px);
        box-shadow: var(--shadow-lg);
    }

    .stage-card h4 {
        font-family: 'Manrope', sans-serif;
        font-weight: 700;
    }

    .stage-card.left {
        text-align: right;
        border-right: 4px solid var(--color-secondary);
    }

    .stage-card.right {
        border-left: 4px solid var(--color-accent);
    }

    .stage-card.center {
        border-right: 4px solid var(--color-primary);
    }

    .faq-section {
        background: var(--color-surface);
        border-radius: 16px;
        padding: var(--space-8);
        margin-bottom: var(--space-8);
        border: 1px solid var(--color-border);
        box-shadow: var(--shadow-md);
    }

    .faq-item {
        margin-bottom: var(--space-6);
        border-bottom: 1px solid var(--color-border);
        padding-bottom: var(--space-4);
    }

    .faq-item:last-child {
        border-bottom: none;
        margin-bottom: 0;
        padding-bottom: 0;
    }

    .faq-question {
        font-weight: 700;
        font-size: var(--font-size-lg);
        color: var(--color-text-primary);
        margin-bottom: var(--space-2);
        display: flex;
        align-items: center;
        gap: var(--space-3);
    }

    .faq-answer {
        color: var(--color-text-secondary);
        padding-left: 32px;
        line-height: 1.6;
    }
</style>
{% endblock %}

{% block content %}
<section class="section-padding bg-body">
    <div class="container">
        <!-- Understanding ALS Section -->
        <!-- Understanding ALS Section -->
        <div style="max-width: 1200px; margin: 3rem auto 0;">
            <style>
                .als-layout-grid {
                    display: grid;
                    grid-template-columns: 1fr 280px;
                    gap: 3rem;
                    position: relative;
                }

                .als-sidebar {
                    position: sticky;
                    top: 2rem;
                    height: fit-content;
                    padding-top: 0;
                }

                .als-nav-link {
                    display: block;
                    padding: 0.5rem 0.75rem;
                    margin-bottom: 0.125rem;
                    border-radius: 6px;
                    color: #334155;
                    text-decoration: none;
                    transition: background-color 0.15s ease, color 0.15s ease;
                    font-weight: 500;
                    font-size: 0.9rem;
                    border: none;
                }

                .als-nav-link:hover {
                    background: #f1f5f9;
                    color: #0f172a;
                    transform: none;
                }

                .als-nav-link.active {
                    background: #e2e8f0;
                    color: #0f172a;
                    font-weight: 600;
                    box-shadow: none;
                }

                @media (max-width: 992px) {
                    .als-layout-grid {
                        display: flex;
                        flex-direction: column-reverse;
                        /* Content bottom, Nav top? No, Sidebar is 2nd in DOM. */
                        /* If I want Nav on TOP on mobile, and Sidebar is 2nd in DOM, I need column-reverse */
                        gap: 2rem;
                    }

                    /* Wait, if I use column-reverse, sidebar (2nd) goes to TOP. Main (1st) goes to BOTTOM. */
                    .als-sidebar {
                        position: static;
                        top: 0;
                        width: 100%;
                    }
                }
            </style>

            <div class="als-layout-grid">
                <!-- Main Content Column -->
                <div class="als-main-content">

                    <!-- What is ALS Definition -->
                    <div class="info-card" id="what-is-als">
                        <div class="icon-wrapper">
                            <div class="section-icon">
                                <i class="fas fa-brain"></i>
                            </div>
                        </div>
                        <h2 style="text-align: center; margin-bottom: var(--space-4);">What is ALS?</h2>

                        <!-- Medical Definition -->
                        <div
                            style="background: var(--color-secondary-light); padding: var(--space-4); border-radius: 12px; margin-bottom: var(--space-4); border-left: 4px solid var(--color-secondary);">

                            <p
                                style="font-size: var(--font-size-base); line-height: 1.6; color: var(--color-text-primary);">
                                <strong>Amyotrophic Lateral Sclerosis (ALS)</strong> is a progressive neurodegenerative
                                disease
                                that affects nerve cells (motor neurons) in the brain and spinal cord. Also known as Lou
                                Gehrig's disease or Motor Neuron Disease (MND), it causes the gradual death of neurons
                                that
                                control voluntary muscle movement.
                            </p>
                        </div>

                        <!-- Simple Explanation -->
                        <p
                            style="font-size: var(--font-size-lg); line-height: 1.8; margin-bottom: var(--space-4); text-align: center;">
                            <strong>In simple terms:</strong> Your brain sends messages through special nerve cells
                            called motor
                            neurons to tell your muscles what to do—like "move your hand" or "take a breath." In ALS,
                            these
                            motor neurons slowly break down and die. When they stop working, the messages can't get
                            through, so
                            muscles become weak and eventually stop moving.
                        </p>

                        <div
                            style="background: var(--color-primary-light); padding: var(--space-6); border-radius: 12px; margin-bottom: var(--space-6);">
                            <p
                                style="color: var(--color-text-heading); font-weight: 700; margin-bottom: var(--space-3); display: flex; align-items: center; gap: 8px;">
                                <i class="fas fa-lightbulb" style="color: var(--color-primary);"></i> Think of it like
                                your
                                home's electrical system:
                            </p>
                            <ul
                                style="color: var(--color-text-primary); margin: 0; padding-left: var(--space-6); line-height: 1.8;">
                                <li><strong>Your brain</strong> is the main switch that sends the command "turn on the
                                    lights"
                                </li>
                                <li><strong>Motor neurons</strong> are the electrical wires that carry that command</li>
                                <li><strong>Your muscles</strong> are the lights that turn on when they receive the
                                    signal</li>
                            </ul>
                            <p
                                style="color: var(--color-text-primary); margin-top: var(--space-3); padding: var(--space-3); background: rgba(255,255,255,0.5); border-radius: 8px;">
                                <i class="fas fa-arrow-right"
                                    style="color: var(--color-primary); margin-right: 8px;"></i>
                                <strong>In ALS:</strong> The main switch (brain) works perfectly fine, but the wires
                                (motor
                                neurons) slowly get damaged. As each wire breaks down, that light (muscle) first
                                flickers and
                                dims, then eventually goes out. Different wires break at different times, which is why
                                some
                                muscles weaken before others.
                            </p>
                        </div>

                        <!-- Types of ALS -->
                        <h4
                            style="text-align: center; margin-bottom: var(--space-4); color: var(--color-text-heading);">
                            <i class="fas fa-dna" style="margin-right: 8px; color: var(--color-primary);"></i>Types of
                            ALS
                        </h4>
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: var(--space-4);">
                            <div
                                style="background: var(--color-bg-body); padding: var(--space-4); border-radius: 12px; border-left: 4px solid var(--color-primary);">
                                <h5 style="color: var(--color-primary); margin-bottom: var(--space-2);">Sporadic ALS
                                </h5>
                                <p class="text-sm"
                                    style="color: var(--color-text-secondary); margin-bottom: var(--space-2);">
                                    Occurs randomly with no known family history. The cause is unknown but may involve
                                    genetic
                                    and environmental factors.</p>
                                <p
                                    style="color: var(--color-primary); font-weight: 700; font-size: var(--font-size-lg);">
                                    ~90-95% of cases</p>
                            </div>
                            <div
                                style="background: var(--color-accent-light); padding: var(--space-4); border-radius: 12px; border-left: 4px solid var(--color-accent);">
                                <h5 style="color: var(--color-accent); margin-bottom: var(--space-2);">Familial ALS</h5>
                                <p class="text-sm"
                                    style="color: var(--color-text-secondary); margin-bottom: var(--space-2);">
                                    Inherited through genetic mutations (like C9orf72, SOD1). Children have a 50% chance
                                    of
                                    inheriting the gene.</p>
                                <p
                                    style="color: var(--color-accent); font-weight: 700; font-size: var(--font-size-lg);">
                                    ~5-10%
                                    of cases</p>
                            </div>
                        </div>
                    </div>

                    <!-- How ALS Affects the Body -->
                    <div class="info-card" id="how-als-affects">
                        <div class="icon-wrapper">
                            <div class="section-icon">
                                <i class="fas fa-project-diagram"></i>
                            </div>
                        </div>
                        <h3 style="text-align: center; margin-bottom: var(--space-4);">How ALS Affects the Body</h3>

                        <!-- Motor Neurons Definition -->
                        <div
                            style="background: var(--color-primary-light); padding: var(--space-4); border-radius: 12px; margin-bottom: var(--space-6); text-align: center;">
                            <p
                                style="font-size: var(--font-size-base); line-height: 1.6; color: var(--color-text-primary);">
                                <i class="fas fa-info-circle"
                                    style="color: var(--color-primary); margin-right: 8px;"></i>
                                <strong>Motor Neurons</strong> are specialized nerve cells that carry signals from the
                                brain and
                                spinal cord to the muscles, allowing us to perform voluntary movements like walking,
                                speaking,
                                and breathing.
                            </p>
                        </div>

                        <div
                            style="display: grid; grid-template-columns: 1fr 1fr; gap: var(--space-4); margin-bottom: var(--space-6);">
                            <div
                                style="background: var(--color-bg-body); padding: var(--space-4); border-radius: 12px; border-left: 4px solid var(--color-primary);">
                                <h4 style="color: var(--color-primary); margin-bottom: var(--space-2);">Upper Motor
                                    Neurons
                                    (UMN)</h4>
                                <p class="text-sm">Located in the motor cortex of the brain, they initiate voluntary
                                    movement
                                    and send signals down through the corticospinal tract to the spinal cord.</p>
                            </div>
                            <div
                                style="background: var(--color-secondary-light); padding: var(--space-4); border-radius: 12px; border-left: 4px solid var(--color-secondary);">
                                <h4 style="color: var(--color-secondary-dark); margin-bottom: var(--space-2);">Lower
                                    Motor
                                    Neurons (LMN)</h4>
                                <p class="text-sm">Located in the brainstem and spinal cord, they directly connect to
                                    muscles
                                    via the neuromuscular junction, triggering muscle contraction.</p>
                            </div>
                        </div>

                        <!-- What Happens to Motor Neurons -->
                        <div
                            style="background: var(--color-accent-light); padding: var(--space-4); border-radius: 12px; margin-bottom: var(--space-6);">
                            <h4 style="color: var(--color-accent); margin-bottom: var(--space-3);">
                                <i class="fas fa-microscope" style="margin-right: 8px;"></i>What Happens to Motor
                                Neurons in ALS
                            </h4>
                            <ul
                                style="margin: 0; padding-left: var(--space-6); color: var(--color-text-secondary); font-size: var(--font-size-sm); line-height: 1.8;">
                                <li><strong>Neurodegeneration:</strong> Motor neurons progressively weaken and die
                                    (apoptosis)
                                </li>
                                <li><strong>Axon Retraction:</strong> The nerve fibers connecting to muscles shrink and
                                    disconnect</li>
                                <li><strong>Denervation:</strong> Muscles lose their nerve supply and cannot receive
                                    signals
                                </li>
                                <li><strong>Muscle Atrophy:</strong> Without stimulation, muscles weaken, shrink, and
                                    lose
                                    function</li>
                                <li><strong>Progression:</strong> Damage typically spreads to adjacent motor neurons
                                    over time
                                </li>
                            </ul>
                        </div>

                        <div class="key-message">
                            <p style="margin-bottom: var(--space-3);">
                                <i class="fas fa-exclamation-circle" style="color: var(--color-accent);"></i>
                                <strong>Important: What ALS Does NOT Affect</strong>
                            </p>
                            <ul
                                style="margin: 0; padding-left: var(--space-6); color: var(--color-text-primary); font-size: var(--font-size-sm); line-height: 1.8; text-align: left;">
                                <li><strong>Sensory Nerves:</strong> Sight, hearing, touch, taste, and smell remain
                                    fully intact
                                </li>
                                <li><strong>Cognitive Function:</strong> For most people, thinking and memory are
                                    preserved
                                    (though 35-50% may have mild changes)</li>
                                <li><strong>Autonomic Functions:</strong> Bowel and bladder control are typically
                                    maintained
                                </li>
                                <li><strong>Eye Muscles:</strong> Extraocular muscles usually remain unaffected, even in
                                    late
                                    stages</li>
                                <li><strong>Cardiac Muscle:</strong> The heart muscle continues to function normally
                                </li>
                            </ul>
                        </div>
                    </div>

                    <!-- Neural Simulation Section -->
                    <div class="neural-simulation-section">
                        <h2 class="neural-simulation-title">Visualizing the Brain-Muscle Connection</h2>

                        <!-- Color Legend -->
                        <div
                            style="display: flex; justify-content: center; gap: 2rem; margin-bottom: 1.5rem; flex-wrap: wrap;">
                            <div style="display: flex; align-items: center; gap: 0.5rem;">
                                <div style="width: 20px; height: 4px; background: #00ffff; border-radius: 2px;"></div>
                                <span style="font-size: 0.85rem; color: rgba(255,255,255,0.8);">Healthy neuron</span>
                            </div>
                            <div style="display: flex; align-items: center; gap: 0.5rem;">
                                <div style="width: 20px; height: 4px; background: #ff9966; border-radius: 2px;"></div>
                                <span style="font-size: 0.85rem; color: rgba(255,255,255,0.8);">Damaged neuron</span>
                            </div>
                            <div style="display: flex; align-items: center; gap: 0.5rem;">
                                <div style="width: 12px; height: 12px; background: #ff0; border-radius: 50%;"></div>
                                <span style="font-size: 0.85rem; color: rgba(255,255,255,0.8);">Nerve signal</span>
                            </div>
                        </div>

                        <div class="simulation-grid">


                            <!-- Healthy System -->
                            <div class="simulation-section">
                                <h3 class="simulation-title healthy">Healthy System</h3>
                                <div class="simulation-container">
                                    <svg width="400" height="250" viewBox="0 0 400 250">
                                        <!-- Dendrites -->
                                        <path class="glow-healthy" d="M40 120 C20 80, 10 60, 5 40" stroke="#00ffff"
                                            stroke-width="2" fill="none" />
                                        <path class="glow-healthy" d="M40 120 C25 100, 5 90, 10 70" stroke="#00ffff"
                                            stroke-width="2" fill="none" />
                                        <path class="glow-healthy" d="M40 120 C15 130, 0 150, 5 160" stroke="#00ffff"
                                            stroke-width="2" fill="none" />
                                        <path class="glow-healthy" d="M40 120 C25 150, 5 180, 0 200" stroke="#00ffff"
                                            stroke-width="2" fill="none" />

                                        <!-- Soma -->
                                        <circle class="glow-healthy" cx="60" cy="120" r="20" fill="#005577"
                                            stroke="#00ffff" stroke-width="2" />
                                        <text x="60" y="95" text-anchor="middle" class="fade-in"
                                            id="label-dendrites-h">Dendrites</text>
                                        <text x="60" y="125" text-anchor="middle" class="fade-in" id="label-soma-h">Cell
                                            Body</text>
                                        <text x="60" y="150" text-anchor="middle" class="fade-in"
                                            id="label-neuron-h">Motor
                                            Neuron</text>

                                        <!-- Axon with myelin segments -->
                                        <line class="glow-healthy" x1="80" y1="120" x2="320" y2="120" stroke="#00ffff"
                                            stroke-width="2" />
                                        <g stroke="#00ffff" stroke-width="6" class="glow-healthy">
                                            <line x1="100" y1="120" x2="120" y2="120" />
                                            <line x1="140" y1="120" x2="160" y2="120" />
                                            <line x1="180" y1="120" x2="200" y2="120" />
                                            <line x1="220" y1="120" x2="240" y2="120" />
                                            <line x1="260" y1="120" x2="280" y2="120" />
                                        </g>
                                        <text x="200" y="110" text-anchor="middle" class="fade-in"
                                            id="label-axon-h">Axon</text>
                                        <text x="160" y="140" text-anchor="middle" class="fade-in"
                                            id="label-myelin-h">Myelin
                                            Sheath</text>

                                        <!-- Axon terminals -->
                                        <path class="glow-healthy" d="M320 120 C340 100, 360 140, 380 120"
                                            stroke="#00ffff" stroke-width="2" fill="none" />
                                        <circle class="glow-healthy" cx="380" cy="120" r="10" fill="#ffaa00"
                                            stroke="#fff" stroke-width="1" />
                                        <text x="380" y="105" text-anchor="middle" class="fade-in"
                                            id="label-muscle-h">Muscle</text>

                                        <!-- Signal -->
                                        <circle class="pulse-signal" r="5" fill="#ff0" id="signal-healthy"
                                            style="opacity: 0;">
                                            <animateMotion dur="3s" repeatCount="1" fill="freeze" begin="indefinite"
                                                path="M80,120 L320,120 C340,100 360,140 380,120" />
                                        </circle>
                                    </svg>
                                </div>
                                <p class="simulation-explanation">
                                    <strong>Healthy Signal Transmission:</strong> Electrical impulses (action
                                    potentials) travel rapidly along the axon—up to 120 m/s—protected by the myelin
                                    sheath. At the neuromuscular junction, acetylcholine is released, triggering
                                    immediate, precise muscle contraction.
                                </p>
                            </div>

                            <!-- ALS System -->
                            <div class="simulation-section">
                                <h3 class="simulation-title als">ALS-Affected System</h3>
                                <div class="simulation-container">
                                    <svg width="400" height="250" viewBox="0 0 400 250">
                                        <!-- Damaged Dendrites -->
                                        <path class="glow-als" d="M40 120 C20 80, 10 60, 5 40" stroke="#ff9966"
                                            stroke-width="2" fill="none" stroke-dasharray="4,2" />
                                        <path class="glow-als" d="M40 120 C25 100, 5 90, 10 70" stroke="#ff9966"
                                            stroke-width="2" fill="none" stroke-dasharray="4,2" />

                                        <!-- Soma -->
                                        <circle class="glow-als" cx="60" cy="120" r="20" fill="#662222" stroke="#ff9966"
                                            stroke-width="2" />
                                        <text x="60" y="95" text-anchor="middle" class="fade-in label-als"
                                            id="label-dendrites-a">Dendrites</text>
                                        <text x="60" y="125" text-anchor="middle" class="fade-in label-als"
                                            id="label-soma-a">Cell Body</text>
                                        <text x="60" y="150" text-anchor="middle" class="fade-in label-als"
                                            id="label-neuron-a">Motor Neuron</text>

                                        <!-- Damaged Axon -->
                                        <line class="glow-als" x1="80" y1="120" x2="320" y2="120" stroke="#ff9966"
                                            stroke-width="2" stroke-dasharray="4,2" />
                                        <g stroke="#ff9966" stroke-width="6" opacity="0.5" class="glow-als">
                                            <line x1="100" y1="120" x2="120" y2="120" />
                                            <line x1="140" y1="120" x2="160" y2="120" />
                                            <line x1="180" y1="120" x2="200" y2="120" />
                                        </g>
                                        <text x="200" y="110" text-anchor="middle" class="fade-in label-als"
                                            id="label-axon-a">Axon</text>
                                        <text x="160" y="140" text-anchor="middle" class="fade-in label-als"
                                            id="label-myelin-a">Myelin Sheath</text>

                                        <!-- Signal Blocked Indicator -->
                                        <g class="fade-in" id="signal-blocked-marker">
                                            <line x1="255" y1="110" x2="275" y2="130" stroke="#ff3333" stroke-width="3"
                                                opacity="0.9" />
                                            <line x1="275" y1="110" x2="255" y2="130" stroke="#ff3333" stroke-width="3"
                                                opacity="0.9" />
                                            <text x="265" y="160" text-anchor="middle" fill="#ff6666" font-size="10"
                                                font-weight="bold">Signal Blocked</text>
                                        </g>

                                        <!-- Axon terminals -->
                                        <path class="glow-als" d="M320 120 C340 100, 360 140, 380 120" stroke="#ff9966"
                                            stroke-width="2" fill="none" />
                                        <circle class="glow-als" cx="380" cy="120" r="10" fill="#884444" stroke="#fff"
                                            stroke-width="1" opacity="0.6" />
                                        <text x="380" y="105" text-anchor="middle" class="fade-in label-als"
                                            id="label-muscle-a">Weak Muscle</text>

                                        <!-- Signal -->
                                        <circle class="pulse-signal-als" r="5" fill="#ff9966" id="signal-als"
                                            style="opacity: 0;">
                                            <animateMotion dur="5s" repeatCount="1" fill="freeze" begin="indefinite"
                                                path="M80,120 L260,120" />
                                        </circle>
                                    </svg>
                                </div>
                                <p class="simulation-explanation">
                                    <strong>ALS Disruption:</strong> Motor neurons progressively degenerate—axons
                                    retract, myelin breaks down, and the neuromuscular junction is lost. Signals weaken,
                                    slow down, or stop completely. Without neural stimulation, muscles atrophy (shrink)
                                    and eventually become paralyzed.
                                </p>
                            </div>
                        </div>

                        <div class="shared-animation-control">
                            <button class="toggle-control" id="animation-control" tabindex="0">
                                <i class="fas fa-play icon play-icon"></i>
                                <i class="fas fa-pause icon pause-icon"></i>
                            </button>
                        </div>
                    </div>

                    <!-- Comprehensive Symptoms Section -->
                    <div class="info-card" id="symptoms">
                        <div class="icon-wrapper">
                            <div class="section-icon">
                                <i class="fas fa-file-medical"></i>
                            </div>
                        </div>
                        <!-- Using class-controlled spacing -->
                        <h3
                            style="color: var(--color-primary); margin-bottom: var(--space-6); font-size: var(--font-size-xl); text-align: center;">
                            Common Signs and Symptoms</h3>

                        <p
                            style="color: var(--color-text-secondary); font-size: var(--font-size-lg); line-height: 1.6; margin-bottom: var(--space-4); text-align: center;">
                            Because ALS damages the brain's connection to muscles, the symptoms are related to muscle
                            weakness
                            and control. It's important to remember that ALS is different for everyone; the symptoms and
                            the
                            order they appear in can vary greatly.
                        </p>

                        <div class="symptom-grid">
                            <!-- Onset Types -->
                            <div class="symptom-card">
                                <div class="symptom-icon"><i class="fas fa-walking"></i></div>
                                <div>
                                    <strong>Limb-Onset</strong>
                                    <p class="text-sm">Starts in arms or legs (~70% of cases)</p>
                                </div>
                            </div>
                            <div class="symptom-card secondary">
                                <div class="symptom-icon"><i class="fas fa-comment-medical"></i></div>
                                <div>
                                    <strong>Bulbar-Onset</strong>
                                    <p class="text-sm">Starts with speech/swallowing (~25%)</p>
                                </div>
                            </div>
                            <div class="symptom-card accent">
                                <div class="symptom-icon"><i class="fas fa-lungs"></i></div>
                                <div>
                                    <strong>Respiratory-Onset</strong>
                                    <p class="text-sm">Starts with breathing problems (~5%)</p>
                                </div>
                            </div>

                            <!-- Muscle Weakness -->
                            <div class="symptom-card">
                                <div class="symptom-icon">
                                    <i class="fas fa-hand-paper"></i>
                                </div>
                                <div>
                                    <strong style="color: var(--color-text-primary);">Muscle Weakness</strong>
                                    <p class="text-sm" style="color: var(--color-text-secondary); margin-top: 2px;">
                                        Difficulty with tasks like buttoning shirts, writing, or climbing stairs</p>
                                </div>
                            </div>

                            <!-- Muscle Twitching -->
                            <div class="symptom-card secondary">
                                <div class="symptom-icon">
                                    <i class="fas fa-wave-square"></i>
                                </div>
                                <div>
                                    <strong style="color: var(--color-text-primary);">Muscle Twitching & Cramps</strong>
                                    <p class="text-sm" style="color: var(--color-text-secondary); margin-top: 2px;">
                                        Small involuntary muscle twitches (fasciculations) and cramps</p>
                                </div>
                            </div>

                            <!-- Speech & Swallowing -->
                            <div class="symptom-card accent">
                                <div class="symptom-icon">
                                    <i class="fas fa-comment-dots"></i>
                                </div>
                                <div>
                                    <strong style="color: var(--color-text-primary);">Speech & Swallowing
                                        Problems</strong>
                                    <p class="text-sm" style="color: var(--color-text-secondary); margin-top: 2px;">
                                        Slurred speech (dysarthria) and difficulty swallowing (dysphagia)</p>
                                </div>
                            </div>

                            <!-- Stiffness -->
                            <div class="symptom-card">
                                <div class="symptom-icon">
                                    <i class="fas fa-grip-lines"></i>
                                </div>
                                <div>
                                    <strong style="color: var(--color-text-primary);">Stiffness & Poor
                                        Coordination</strong>
                                    <p class="text-sm" style="color: var(--color-text-secondary); margin-top: 2px;">
                                        Muscle tightness (spasticity) leading to awkward movements</p>
                                </div>
                            </div>

                            <!-- Breathing Problems -->
                            <div class="symptom-card accent">
                                <div class="symptom-icon">
                                    <i class="fas fa-wind"></i>
                                </div>
                                <div>
                                    <strong style="color: var(--color-text-primary);">Breathing Difficulties</strong>
                                    <p class="text-sm" style="color: var(--color-text-secondary); margin-top: 2px;">
                                        Shortness of breath as respiratory muscles weaken</p>
                                </div>
                            </div>

                            <!-- Progressive Difficulty -->
                            <div class="symptom-card secondary">
                                <div class="symptom-icon">
                                    <i class="fas fa-running"></i>
                                </div>
                                <div>
                                    <strong style="color: var(--color-text-primary);">Progressive Movement
                                        Challenges</strong>
                                    <p class="text-sm" style="color: var(--color-text-secondary); margin-top: 2px;">
                                        Increasing difficulty with walking and daily activities</p>
                                </div>
                            </div>

                            <!-- Emotional Changes (Pseudobulbar Affect) -->
                            <div class="symptom-card">
                                <div class="symptom-icon">
                                    <i class="fas fa-theater-masks"></i>
                                </div>
                                <div>
                                    <strong style="color: var(--color-text-primary);">Emotional Changes (PBA)</strong>
                                    <p class="text-sm" style="color: var(--color-text-secondary); margin-top: 2px;">
                                        Pseudobulbar Affect: involuntary laughing or crying not matching emotions</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Progressive Understanding Timeline -->
                    <div class="info-card" id="progression">
                        <div class="icon-wrapper">
                            <div class="section-icon">
                                <i class="fas fa-hourglass-half"></i>
                            </div>
                        </div>
                        <h3 style="text-align: center; margin-bottom: var(--space-6);">Understanding Disease
                            Progression
                        </h3>

                        <p style="text-align: center; margin-bottom: var(--space-6);">
                            ALS is a progressive journey. While every path is unique, these are the general stages:
                        </p>

                        <div class="timeline-container">
                            <div class="timeline-line"></div>

                            <!-- Initial Stage -->
                            <div class="timeline-stage">
                                <div style="flex: 1; text-align: right; padding-right: var(--space-4);">
                                    <div class="stage-card left">
                                        <h4 style="color: var(--color-secondary); margin-bottom: var(--space-2);">
                                            Initial
                                            Stage</h4>
                                        <p class="text-sm">
                                            • Muscle twitching (fasciculations)<br>
                                            • Subtle weakness in hands or feet<br>
                                            • Difficulty with fine motor tasks<br>
                                            • Tripping, dropping things<br>
                                            • Unexplained fatigue<br>
                                            • Slurred speech (if bulbar-onset)<br>
                                            • Diagnosis period (often 9-12 months)
                                        </p>
                                    </div>
                                </div>
                                <div class="timeline-marker"
                                    style="border-color: var(--color-secondary); background: white;">
                                </div>
                                <div style="flex: 1; padding-left: var(--space-4);"></div>
                            </div>

                            <!-- Middle Stage -->
                            <div class="timeline-stage">
                                <div style="flex: 1; text-align: right; padding-right: var(--space-4);"></div>
                                <div class="timeline-marker"
                                    style="border-color: var(--color-primary); background: white;">
                                </div>
                                <div style="flex: 1; padding-left: var(--space-4);">
                                    <div class="stage-card center">
                                        <h4 style="color: var(--color-primary); margin-bottom: var(--space-2);">
                                            Middle
                                            Stage
                                        </h4>
                                        <p class="text-sm">
                                            • Mobility aids needed<br>
                                            • Daily tasks harder<br>
                                            • Difficulty swallowing<br>
                                            • Breathing problems<br>
                                            • Changes in speech<br>
                                        </p>
                                    </div>
                                </div>
                            </div>

                            <!-- Advanced Stage -->
                            <div class="timeline-stage">
                                <div style="flex: 1; text-align: right; padding-right: var(--space-4);">
                                    <div class="stage-card right">
                                        <h4 style="color: var(--color-accent); margin-bottom: var(--space-2);">
                                            Advanced
                                            Stage</h4>
                                        <p class="text-sm">
                                            • 24/7 ventilator support required<br>
                                            • tracheostomy needed<br>
                                            • Feeding tube required<br>
                                        </p>
                                    </div>
                                </div>
                                <div class="timeline-marker"
                                    style="border-color: var(--color-accent); background: white;">
                                </div>
                                <div style="flex: 1; padding-left: var(--space-4);"></div>
                            </div>
                        </div>
                    </div>

                    <!-- FAQ Section -->
                    <div class="faq-section" id="faq">
                        <div class="icon-wrapper">
                            <div class="section-icon">
                                <i class="fas fa-question-circle"></i>
                            </div>
                        </div>
                        <h3
                            style="color: var(--color-primary); margin-bottom: var(--space-6); font-size: var(--font-size-xl); text-align: center;">
                            Frequently Asked Questions</h3>

                        <div class="faq-item">
                            <div class="faq-question">
                                <i class="fas fa-question"></i> What causes ALS?
                            </div>
                            <div class="faq-answer">
                                The exact cause of ALS is unknown in about 90% of cases (sporadic ALS). In the
                                remaining
                                10%
                                of
                                cases, there is a known family history of the disease (familial ALS), linked to
                                specific
                                genetic
                                mutations.
                            </div>
                        </div>

                        <div class="faq-item">
                            <div class="faq-question">
                                <i class="fas fa-question"></i> Is there a cure for ALS?
                            </div>
                            <div class="faq-answer">
                                Currently, there is no cure for ALS. However, there are treatments, therapies, and
                                medical
                                devices that can help manage symptoms, slow the progression of the disease, and
                                significantly improve a person's quality of life. Research is ongoing worldwide to
                                find a
                                cause and a cure, and new genetic therapies are showing promise for specific types
                                of
                                familial ALS.
                            </div>
                        </div>

                        <div class="faq-item">
                            <div class="faq-question">
                                <i class="fas fa-question"></i> Does ALS affect cognitive function?
                            </div>
                            <div class="faq-answer">
                                ALS primarily affects motor function. However, about 35-50% of people with ALS
                                experience
                                some cognitive or behavioral changes. In approximately 10-15% of cases, ALS occurs
                                with
                                frontotemporal dementia (FTD), which can affect personality, behavior, and language.
                                For the
                                majority, thinking abilities, memory, and emotional capacity remain intact
                                throughout the
                                disease, allowing them to make decisions about their care.
                            </div>
                        </div>

                        <div class="faq-item">
                            <div class="faq-question">
                                <i class="fas fa-question"></i> How quickly does ALS progress?
                            </div>
                            <div class="faq-answer">
                                ALS progression varies greatly from person to person. Some people may progress
                                quickly over
                                months, while others live with the disease for many years. The average survival time
                                is 2-5
                                years after diagnosis, but about 20% of people live 5 years or longer, and some live
                                10+
                                years.
                            </div>
                        </div>
                    </div>

                    <!-- Core Message -->
                    <div
                        style="background: #fafafa; border: 1px solid #e5e5e5; border-radius: 12px; padding: var(--space-6); margin-top: var(--space-6); text-align: center;">
                        <p
                            style="color: #6b6b6b; font-weight: 600; font-size: var(--font-size-base); margin-bottom: var(--space-3); letter-spacing: 0.5px;">
                            Remember
                        </p>
                        <p
                            style="color: #2d2d2d; font-size: var(--font-size-lg); line-height: 1.7; max-width: 600px; margin: 0 auto;">
                            ALS changes how the body works, but it does not change who a person is. Every person
                            with ALS
                            deserves respect, good care, and a life filled with meaning.
                        </p>
                    </div>

                    <!-- Medical Disclaimer -->
                    <div
                        style="background: #fff; border: 1px solid #e5e5e5; border-radius: 8px; padding: var(--space-4); margin-top: var(--space-6); text-align: center;">
                        <p style="color: #6b6b6b; font-size: var(--font-size-sm); line-height: 1.6; margin: 0;">
                            <strong>Disclaimer:</strong> This guide is for informational purposes only and does not
                            constitute medical advice. Always consult with your neurologist or healthcare team for
                            medical
                            decisions specific to your condition.
                        </p>
                    </div>
                </div> <!-- Close als-main-content -->
                <!-- Sidebar -->
                <aside class="als-sidebar">
                    <nav style="padding: 0.5rem 0 0.5rem 1.5rem; border-left: 1px solid #e2e8f0; height: 100%;">
                        <div style="display: flex; flex-direction: column; gap: 0.125rem;">
                            <a href="#what-is-als" class="als-nav-link">What is ALS?</a>
                            <a href="#how-als-affects" class="als-nav-link">How it Affects Body</a>
                            <a href="#symptoms" class="als-nav-link">Signs & Symptoms</a>
                            <a href="#progression" class="als-nav-link">Disease Progression</a>
                            <a href="#faq" class="als-nav-link">FAQ</a>
                        </div>
                    </nav>
                </aside>
            </div> <!-- Close als-layout-grid -->
        </div> <!-- Close max-width wrapper -->
    </div> <!-- Close container -->
</section>
{% endblock %}

{% block extra_js %}
<script>
    // Global animation state
    let isPlaying = false;
    let animationTimeouts = [];

    // Animation control functions
    function resetAnimations() {
        // Reset all signals to invisible
        document.getElementById('signal-healthy').style.opacity = '0';
        document.getElementById('signal-als').style.opacity = '0';

        // Reset all labels to invisible
        const healthyLabels = ['label-dendrites-h', 'label-soma-h', 'label-neuron-h', 'label-axon-h', 'label-myelin-h', 'label-muscle-h'];
        const alsLabels = ['label-dendrites-a', 'label-soma-a', 'label-neuron-a', 'label-axon-a', 'label-myelin-a', 'label-muscle-a'];

        [...healthyLabels, ...alsLabels].forEach(id => {
            const element = document.getElementById(id);
            if (element) {
                element.classList.remove('visible');
            }
        });

        // Stop any running animations
        const healthySignal = document.querySelector('#signal-healthy animateMotion');
        const alsSignal = document.querySelector('#signal-als animateMotion');

        if (healthySignal) healthySignal.endElement();
        if (alsSignal) alsSignal.endElement();
    }

    function clearAllTimeouts() {
        animationTimeouts.forEach(timeout => clearTimeout(timeout));
        animationTimeouts = [];
    }

    function playAnimations() {
        // Reset everything to start from scratch
        resetAnimations();
        clearAllTimeouts();

        // Show signals immediately
        document.getElementById('signal-healthy').style.opacity = '1';
        document.getElementById('signal-als').style.opacity = '1';

        // Start signal animations
        const healthySignal = document.querySelector('#signal-healthy animateMotion');
        const alsSignal = document.querySelector('#signal-als animateMotion');

        if (healthySignal) healthySignal.beginElement();
        if (alsSignal) alsSignal.beginElement();

        // Show labels progressively for healthy system
        const healthyLabelTimings = [
            { id: 'label-dendrites-h', delay: 200 },
            { id: 'label-soma-h', delay: 600 },
            { id: 'label-neuron-h', delay: 800 },
            { id: 'label-axon-h', delay: 1200 },
            { id: 'label-myelin-h', delay: 1800 },
            { id: 'label-muscle-h', delay: 2600 }
        ];

        // Show labels progressively for ALS system (slower progression)
        const alsLabelTimings = [
            { id: 'label-dendrites-a', delay: 200 },
            { id: 'label-soma-a', delay: 600 },
            { id: 'label-neuron-a', delay: 800 },
            { id: 'label-axon-a', delay: 1500 },
            { id: 'label-myelin-a', delay: 2500 },
            { id: 'signal-blocked-marker', delay: 3500 },
            { id: 'label-muscle-a', delay: 4000 }
        ];

        [...healthyLabelTimings, ...alsLabelTimings].forEach(({ id, delay }) => {
            const timeout = setTimeout(() => {
                const element = document.getElementById(id);
                if (element) {
                    element.classList.add('visible');
                }
            }, delay);
            animationTimeouts.push(timeout);
        });

        // Auto-reset after longest animation completes
        const resetTimeout = setTimeout(() => {
            isPlaying = false;
            updateButton();
        }, 5500);
        animationTimeouts.push(resetTimeout);
    }

    function updateButton() {
        const btn = document.getElementById('animation-control');
        if (isPlaying) {
            btn.classList.add('playing');
        } else {
            btn.classList.remove('playing');
        }
    }

    function toggleAnimation() {
        if (isPlaying) {
            // Currently playing, so stop and reset
            isPlaying = false;
            resetAnimations();
            clearAllTimeouts();
        } else {
            // Currently stopped, so play from scratch
            isPlaying = true;
            playAnimations();
        }
        updateButton();
    }

    // Initialize animation control
    document.addEventListener('DOMContentLoaded', () => {
        const animationControl = document.getElementById('animation-control');
        if (animationControl) {
            animationControl.addEventListener('click', toggleAnimation);

            // Make it keyboard accessible
            animationControl.addEventListener('keydown', (e) => {
                if (e.key === 'Enter' || e.key === ' ') {
                    e.preventDefault();
                    toggleAnimation();
                }
            });

            // Set initial state
            resetAnimations();
            updateButton();
        }
    });
</script>
{% endblock %}